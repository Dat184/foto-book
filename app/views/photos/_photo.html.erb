<div id="<%= dom_id photo %>" class="col-12 col-sm-6 mb-3">
  <div class="card h-100">
    <div class="row g-0 h-100">
      <div class="col-lg-6">
        <div class="ratio ratio-4x3 h-100" 
             role="button"
             data-bs-toggle="modal" 
             data-bs-target="#photoModal"
             data-photo-title="<%= photo.title %>"
             data-photo-image="<%= photo.image.url %>"
             data-photo-description="<%= photo.description %>">
          <%= image_tag photo.image.url, class: "img-fluid object-fit-cover w-100 h-100 rounded-start" %>
        </div>
      </div>
      <!-- Content -->
      <div class="col-lg-6 d-flex">
        <div class="card-body d-flex flex-column px-3 py-2">
          <!-- User info -->
          <div class="d-flex justify-content-between align-items-center mb-2">
            <%= link_to public_profile_path(photo.user), class: "d-flex align-items-center mb-2 text-decoration-none text-dark", data: { turbo_prefetch: false } do %>
              <%= image_tag avatar_url(photo.user), class: "rounded-circle me-2 flex-shrink-0 photo-card-avatar", alt: "Profile Avatar" %>
              <span class="fw-bold text-truncate"><%= photo.user.firstName + " " + photo.user.lastName %></span>
            <% end %>
            <!-- Follow/Unfollow Button -->
            <% if action_name == "discovery" && current_user && current_user != photo.user %>
              <% if current_user && current_user.following.include?(photo.user) %>
                <%= button_to "Unfollow", unfollow_user_path(photo.user), method: :delete, class: "btn btn-outline-secondary btn-cus rounded-pill", data: { turbo_prefetch: false } %>
              <% else %>
                <%= button_to "Follow", follow_user_path(photo.user), method: :post, class: "btn btn-primary btn-cus rounded-pill", data: { turbo_prefetch: false } %>
              <% end %>
            <% end %>
          </div>
          <!-- Title -->
          <h6 class="card-title fw-bold text-start mb-1">
            <%= photo.title %>
          </h6>
          <!-- Description -->
          <p class="card-text text-start text-muted small photo-card-description">
            <%= photo.description %>
          </p>
          <!-- Footer -->
          <div class="d-flex justify-content-between align-items-center mt-auto pt-2">
            <div class="d-flex align-items-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-heart-fill text-danger"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"
                />
              </svg>
              <span class="ms-1 small text-muted">142</span>
            </div>
            <span class="small text-muted"><%= photo.created_at.strftime("%d %b %Y") %></span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

