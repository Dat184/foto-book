<div id="<%= dom_id album %>" class="col-12 col-sm-6 mb-3">
  <div class="card h-100">
    <div class="row g-0 h-100">
        <div class="col-lg-6">
          <div class="ratio ratio-1x1 rounded overflow-hidden d-flex">
            <img
              src="<%= album.photos.first.image_url if album.photos.any? %>"
              class="img-fluid object-fit-cover rounded"
            />
            <div class="d-flex flex-column justify-content-end pb-4">
              <div
                class="w-75 h-25 rounded mx-auto item-text d-flex flex-column justify-content-center"
              >
                <h5 class="m-0 mx-2 one-line">
                  <%= album.title %>
                </h5>
                <p class="m-0 d-none d-sm-block"><%= pluralize(album.photos.size, "Photo") %></p>
              </div>
            </div>
          </div>
        </div> 
        <!-- Content -->
      <div class="col-lg-6 d-flex">
        <div class="card-body d-flex flex-column px-3 py-2">
          <!-- User info -->
          <div class="d-flex justify-content-between align-items-center mb-2">
            <%= link_to public_profile_path(album.user), class: "d-flex align-items-center mb-2 text-decoration-none text-dark", data: { turbo_prefetch: false } do %>
              <%= image_tag avatar_url(album.user), class: "rounded-circle me-2 flex-shrink-0 photo-card-avatar", alt: "Profile Avatar" %>
              <span class="fw-bold text-truncate"><%= album.user.firstName + " " + album.user.lastName %></span>
            <% end %>
            <!-- Follow/Unfollow Button -->
            <% if action_name == "discovery" && current_user && current_user != album.user %>
              <% if current_user && current_user.following.include?(album.user) %>
                <%= button_to "Unfollow", unfollow_user_path(album.user), method: :delete, class: "btn btn-outline-secondary btn-cus rounded-pill", data: { turbo_prefetch: false } %>
              <% else %>
                <%= button_to "Follow", follow_user_path(album.user), method: :post, class: "btn btn-primary btn-cus rounded-pill", data: { turbo_prefetch: false } %>
              <% end %>
            <% end %>
          </div>
          <!-- Title -->
          <h6 class="card-title fw-bold text-start mb-1">
            <%= album.title %>
          </h6>
          <!-- Description -->
          <p class="card-text text-start text-muted small photo-card-description">
            <%= album.description %>
          </p>
          <!-- Footer -->
          <div class="d-flex justify-content-between align-items-center mt-auto pt-2">
            <div class="d-flex align-items-center">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-heart-fill text-danger"
                viewBox="0 0 16 16"
              >
                <path
                  fill-rule="evenodd"
                  d="M8 1.314C12.438-3.248 23.534 4.735 8 15-7.534 4.736 3.562-3.248 8 1.314"
                />
              </svg>
              <span class="ms-1 small text-muted">142</span>
            </div>
            <span class="small text-muted"><%= album.created_at.strftime("%d %b %Y") %></span>
          </div>
        </div>
      </div>       
    </div>
  </div>
</div>


